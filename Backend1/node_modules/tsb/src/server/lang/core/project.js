"use strict";
exports.languageServiceHost = require('./languageServiceHost');
var Project = (function () {
    function Project(configFile) {
        var _this = this;
        this.configFile = configFile;
        this.languageServiceHost = new exports.languageServiceHost.LanguageServiceHost(configFile);
        configFile.project.files.forEach(function (file) {
            _this.languageServiceHost.addScript(file);
        });
        this.languageService = ts.createLanguageService(this.languageServiceHost, ts.createDocumentRegistry());
    }
    Project.prototype.getProjectSourceFiles = function () {
        var libFile = exports.languageServiceHost.getDefaultLibFilePath(this.configFile.project.compilerOptions);
        var files = this.languageService.getProgram().getSourceFiles().filter(function (x) { return x.fileName !== libFile; });
        return files;
    };
    Project.prototype.includesSourceFile = function (filePath) {
        return (this.getProjectSourceFiles().filter(function (f) { return f.fileName === filePath; }).length === 1);
    };
    Project.prototype.getDiagnosticsForFile = function (filePath) {
        var diagnostics = this.languageService.getSyntacticDiagnostics(filePath);
        if (diagnostics.length === 0) {
            diagnostics = this.languageService.getSemanticDiagnostics(filePath);
        }
        return diagnostics;
    };
    Project.prototype.getDiagnostics = function () {
        var program = this.languageService.getProgram();
        return program.getGlobalDiagnostics()
            .concat(program.getSemanticDiagnostics())
            .concat(program.getSyntacticDiagnostics());
    };
    return Project;
})();
exports.Project = Project;
