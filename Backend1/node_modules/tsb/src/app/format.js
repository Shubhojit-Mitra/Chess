"use strict";
var uix = require("./uix");
var commands = require("./commands/commands");
var CodeMirror = require('codemirror');
var socketClient_1 = require("../socket/socketClient");
CodeMirror.commands[commands.additionalEditorCommands.format] = function (editor) {
    var doc = editor.getDoc();
    var filePath = editor.filePath;
    if (doc.somethingSelected()) {
        var selection = doc.listSelections()[0];
        var from = selection.anchor;
        var to = selection.head;
        socketClient_1.server.formatDocumentRange({
            from: from, to: to, filePath: filePath
        }).then(function (res) {
            uix.API.applyRefactorings(res.refactorings);
        });
    }
    else {
        socketClient_1.server.formatDocument({
            filePath: filePath
        }).then(function (res) {
            uix.API.applyRefactorings(res.refactorings);
        });
    }
};
